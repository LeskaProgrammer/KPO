# üéì Anti-Plagiarism Microservice System - –°–∏–º–æ–Ω–æ–≤ –ê–ª–µ–∫—Å–µ–π –ë–ü–ò248

–°–∏—Å—Ç–µ–º–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç—É–¥–µ–Ω—á–µ—Å–∫–∏—Ö —Ä–∞–±–æ—Ç –Ω–∞ –ø–ª–∞–≥–∏–∞—Ç, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –Ω–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ —Ä–∞–º–∫–∞—Ö –∫—É—Ä—Å–∞ "–ö–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è".

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

*   **–Ø–∑—ã–∫:** Python 3.10
*   **–§—Ä–µ–π–º–≤–æ—Ä–∫:** FastAPI
*   **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** PostgreSQL (Async SQLAlchemy)
*   **ML & –ê–Ω–∞–ª–∏—Ç–∏–∫–∞:** Scikit-learn (TF-IDF, Cosine Similarity)
*   **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:** Docker, Docker Compose
*   **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è:** QuickChart API

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

–°–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä–µ—Ö –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∞–Ω–Ω—ã—Ö –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö. –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ (REST API), –æ–±–º–µ–Ω —Ñ–∞–π–ª–∞–º–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –æ–±—â–∏–π Docker Volume.

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

1.  **API Gateway (Port 8000)**
    *   **–†–æ–ª—å:** –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (Entry Point).
    *   **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:** –ü—Ä–∏–µ–º –∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤, –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ (—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ, –±–∏–Ω–∞—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ), –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º —Å–µ—Ä–≤–∏—Å–∞–º, –∞–≥—Ä–µ–≥–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤. –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏, –µ—Å–ª–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã).

2.  **File Storing Service (Port 8001)**
    *   **–†–æ–ª—å:** –ú–µ–Ω–µ–¥–∂–µ—Ä —Ä–µ—Å—É—Ä—Å–æ–≤.
    *   **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:** –§–∏–∑–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –Ω–∞ –¥–∏—Å–∫, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –≤ –ë–î (PostgreSQL), –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–≥—Ä—É–∑–æ–∫ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞.

3.  **File Analysis Service (Port 8002)**
    *   **–†–æ–ª—å:** –í—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–æ–µ —è–¥—Ä–æ.
    *   **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:** –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—Å—Ç–æ–≤ –Ω–∞ –ø–ª–∞–≥–∏–∞—Ç, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–±–ª–∞–∫–∞ —Å–ª–æ–≤. –°–µ—Ä–≤–∏—Å –Ω–µ —Ö—Ä–∞–Ω–∏—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ (stateless), –ø–æ–ª—É—á–∞—è –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º –æ—Ç Gateway.

### –°—Ö–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–±—â–∏–π —Ç–æ–º `shared_uploads`, —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤ `/app/uploaded_files` –≤–æ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç Analysis Service –Ω–∞–ø—Ä—è–º—É—é —á–∏—Ç–∞—Ç—å —Ñ–∞–π–ª—ã, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ Storing Service.

---

## üîÑ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### 1. –°–¥–∞—á–∞ —Ä–∞–±–æ—Ç—ã (`POST /submit`)
1.  **Gateway** –ø–æ–ª—É—á–∞–µ—Ç —Ñ–∞–π–ª, –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ.
2.  **Gateway ‚Üí Storage:** –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–∞–π–ª. Storage —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ñ–∞–π–ª –Ω–∞ –¥–∏—Å–∫ –∏ —Å–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å –≤ –ë–î (`verdict="Pending"`). –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É.
3.  **Gateway ‚Üí Analysis:** –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ –∞–Ω–∞–ª–∏–∑ (–ø–µ—Ä–µ–¥–∞–µ—Ç –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –∏ ID –∑–∞–¥–∞–Ω–∏—è).
4.  **Analysis:**
    *   –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —É **Storage** –∏—Å—Ç–æ—Ä–∏—é –≤—Å–µ—Ö –ø—Ä–æ—à–ª—ã—Ö —Ä–∞–±–æ—Ç –ø–æ —ç—Ç–æ–º—É –∑–∞–¥–∞–Ω–∏—é.
    *   –°—á–∏—Ç—ã–≤–∞–µ—Ç —Ñ–∞–π–ª—ã —Å –¥–∏—Å–∫–∞.
    *   –ü—Ä–æ–≤–æ–¥–∏—Ç —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ (—Å–º. –ê–ª–≥–æ—Ä–∏—Ç–º).
    *   –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç (Clean/Plagiarism).
5.  **Gateway ‚Üí Storage:** –û–±–Ω–æ–≤–ª—è–µ—Ç –≤–µ—Ä–¥–∏–∫—Ç –≤ –ë–î (`PATCH`).
6.  **Gateway:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å—Ç—É–¥–µ–Ω—Ç—É.

### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–∞ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–º (`GET /reports/{task_id}`)
1.  **Gateway** –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —É **Storage Service**.
2.  **Storage** –≤—ã–±–∏—Ä–∞–µ—Ç —Ä–∞–±–æ—Ç—ã –∏–∑ –ë–î, —Å–æ—Ä—Ç–∏—Ä—É–µ—Ç –ø–æ –¥–∞—Ç–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è.
3.  **Gateway** –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON —Å–æ —Å–ø–∏—Å–∫–æ–º —Ä–∞–±–æ—Ç –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ø–∏—Å–∞–Ω–Ω—ã—Ö/—á–∏—Å—Ç—ã—Ö —Ä–∞–±–æ—Ç).

### 3. –û–±–ª–∞–∫–æ —Å–ª–æ–≤ (`GET /wordcloud/{submission_id}`)
1.  **Gateway** –ø–æ–ª—É—á–∞–µ—Ç ID —Ä–∞–±–æ—Ç—ã, –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É —É **Storage**.
2.  **Gateway** –ø–µ—Ä–µ–¥–∞–µ—Ç –ø—É—Ç—å –≤ **Analysis Service**.
3.  **Analysis** –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —á–∞—Å—Ç–æ—Ç–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å –∏ —Å—Å—ã–ª–∫—É –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫—É (QuickChart API).

---

## üß† –ê–ª–≥–æ—Ä–∏—Ç–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–ª–∞–≥–∏–∞—Ç–∞

–í —Å–∏—Å—Ç–µ–º–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω ML-–ø–æ–¥—Ö–æ–¥ –Ω–∞ –æ—Å–Ω–æ–≤–µ **TF-IDF (Term Frequency - Inverse Document Frequency)**.

1.  **–ü—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥:** –¢–µ–∫—Å—Ç –æ—á–∏—â–∞–µ—Ç—Å—è, —É–¥–∞–ª—è—é—Ç—Å—è —Å—Ç–æ–ø-—Å–ª–æ–≤–∞ –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–æ–≤ (–ø—Ä–µ–¥–ª–æ–≥–∏, —Å–æ—é–∑—ã, —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∫–æ–¥–∞).
2.  **–í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è N-–≥—Ä–∞–º–º—ã (1-3 —Å–ª–æ–≤–∞). –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–ª–æ–≤–∞, –Ω–æ –∏ —É—Å—Ç–æ–π—á–∏–≤—ã–µ —Ñ—Ä–∞–∑—ã.
3.  **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ:** –í—ã—á–∏—Å–ª—è–µ—Ç—Å—è **–ö–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ (Cosine Similarity)** –º–µ–∂–¥—É –≤–µ–∫—Ç–æ—Ä–æ–º –Ω–æ–≤–æ–π —Ä–∞–±–æ—Ç—ã –∏ –≤–µ–∫—Ç–æ—Ä–∞–º–∏ –≤—Å–µ—Ö —Ä–∞–Ω–µ–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç (–∫—Ä–æ–º–µ —Ä–∞–±–æ—Ç —Ç–æ–≥–æ –∂–µ —Å—Ç—É–¥–µ–Ω—Ç–∞).
4.  **–í–µ—Ä–¥–∏–∫—Ç:**
    *   –°—Ö–æ–¥—Å—Ç–≤–æ **> 80%**: `üö® PLAGIARISM DETECTED` (—É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∏—Å—Ç–æ—á–Ω–∏–∫ —Å–ø–∏—Å—ã–≤–∞–Ω–∏—è).
    *   –°—Ö–æ–¥—Å—Ç–≤–æ **50-80%**: `‚ö†Ô∏è Suspicious`.
    *   –°—Ö–æ–¥—Å—Ç–≤–æ **< 50%**: `‚úÖ Clean`.

---

## üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π Docker –∏ Docker Compose.

1.  **–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤:**
    ```bash
    docker compose up --build
    ```

2.  **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API:**
    –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ Swagger UI –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:
    [http://localhost:8000/docs](http://localhost:8000/docs)